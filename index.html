<!doctype html>
<html lang="de" data-theme="sky">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cruise at Sunset – API Demo</title>

    <!-- Bootstrap Grid/Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Theme CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>

    <!-- Background horizon layers -->
    <div class="bg-horizon" aria-hidden="true"></div>
    <svg class="wing-silhouette" viewBox="0 0 1200 600" aria-hidden="true">
      <path d="M50 360c140-20 260-70 420-160 130-74 300-60 460-80 60-8 140-35 200-60-30 44-92 132-160 170-88 48-184 48-244 88-88 60-128 132-220 160-116 36-286 40-456 24 0 0 50-66 0-142z"
            fill="url(#g)" opacity="0.07"/>
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0%" stop-color="#6E7BFF"/>
          <stop offset="100%" stop-color="#FF6B9E"/>
        </linearGradient>
      </defs>
    </svg>

    <!-- Cockpit fascia -->
    <div class="cockpit-fascia" aria-hidden="true">
      <div class="fascia-rivet"></div><div class="fascia-rivet"></div><div class="fascia-rivet"></div>
      <div class="fascia-rivet"></div><div class="fascia-rivet"></div><div class="fascia-rivet"></div>
    </div>

    <!-- Topbar -->
    <header class="container py-3 topbar">
      <div class="d-flex align-items-center justify-content-between">
        <h1 class="app-title m-0">
          <span class="logo-dot"></span>
          <span class="grad">Cruise at Sunset</span>
          <span class="title-trim"></span>
        </h1>

        <div class="d-flex align-items-center gap-2">
          <span class="chip muted" id="lastUpdateChip" aria-live="polite">bereit zum Abflug</span>
          <button id="themeToggle" class="btn runway small" type="button" aria-pressed="false" title="Theme wechseln">
            <i class="bi bi-brightness-high me-1"></i> Theme
          </button>
        </div>
      </div>
    </header>

    <main class="container pb-5">
      <div class="grid">
        <!-- Katzenbild -->
        <section class="card window">
          <div class="card-header">
            <h2 class="panel-title">
              <span class="panel-icon"><i class="bi bi-heart"></i></span>
              Zufälliges Katzenbild
            </h2>
            <span class="altimeter"></span>
          </div>
          <p class="card-sub">Wolkendeck gesichtet – neue Katze auf Abruf.</p>
          <div class="mb-3">
            <button id="btnCat" class="btn runway chevrons"><i class="bi bi-stars me-2"></i>Neue Katze</button>
          </div>
          <div id="catResult" class="window-porthole ratio ratio-16x9"></div>
          <div class="window-rivets" aria-hidden="true"></div>
        </section>

        <!-- Bitcoin -->
        <section class="card window">
          <div class="card-header">
            <h2 class="panel-title">
              <span class="panel-icon"><i class="bi bi-currency-bitcoin"></i></span>
              Bitcoin-Preis
            </h2>
            <span class="altimeter"></span>
          </div>
          <p class="card-sub">
            Direkt aus dem Tower (CoinGecko). Zahlen im <span class="chip tiny">de-CH</span> Format.
          </p>
          <div class="mb-3 d-flex gap-2 align-items-center">
            <button id="btnBtc" class="btn runway chevrons"><i class="bi bi-coin me-2"></i>Laden</button>
            <span id="btcBadge" class="chip muted tiny" aria-live="polite">—</span>
          </div>
          <div id="btcResult" class="stats">
            <!-- Tiles kommen per JS -->
          </div>
          <div class="window-rivets" aria-hidden="true"></div>
        </section>

        <!-- Wetter -->
        <section class="card window">
          <div class="card-header">
            <h2 class="panel-title">
              <span class="panel-icon"><i class="bi bi-cloud-sun"></i></span>
              Wetter (Zürich)
            </h2>
            <span class="altimeter"></span>
          </div>
          <p class="card-sub">Golden Hour Check – Open-Meteo, heute.</p>
          <div class="mb-3">
            <button id="btnWeather" class="btn runway chevrons"><i class="bi bi-cloud-drizzle me-2"></i>Laden</button>
          </div>
          <div id="weatherResult" class="stats"></div>
          <div class="window-rivets" aria-hidden="true"></div>
        </section>

        <!-- EV + Suche -->
        <section class="card window">
          <div class="card-header">
            <h2 class="panel-title">
              <span class="panel-icon"><i class="bi bi-ev-station"></i></span>
              5 nächstgelegene Strom-Tankstellen
            </h2>
            <span class="altimeter"></span>
          </div>
          <p class="card-sub">PLZ angeben oder Umkreis Winterthur laden. Klick in die Liste zentriert die Karte.</p>

          <div class="d-flex flex-wrap gap-2 align-items-start mb-3">
            <label class="input">
              <span>PLZ</span>
              <input id="zipInput" placeholder="z. B. 8400" inputmode="numeric" />
            </label>
            <button id="btnChargingZip" class="btn runway chevrons"><i class="bi bi-search me-2"></i>Nach PLZ</button>
            <button id="btnCharging" class="btn runway chevrons ghost"><i class="bi bi-lightning-charge me-2"></i>Umkreis Winterthur</button>
            <span id="evCountChip" class="chip tiny muted" aria-live="polite">—</span>
          </div>

          <div id="chargingResult" class="result-window"></div>
          <div class="window-rivets" aria-hidden="true"></div>
        </section>

        <!-- Map -->
        <section class="card window map-card">
          <div class="card-header">
            <h2 class="panel-title">
              <span class="panel-icon"><i class="bi bi-geo-alt"></i></span>
              Karte
            </h2>
            <span class="altimeter"></span>
          </div>
          <p class="card-sub">„Window Seat“ – live zentrierbar über die Liste.</p>
          <div class="mb-3">
            <button id="btnMap" class="btn runway chevrons"><i class="bi bi-map me-2"></i>Karte anzeigen</button>
          </div>
          <div id="map" class="window-porthole map-viewport">
            <div class="map-vignette" aria-hidden="true"></div>
          </div>
          <div class="window-rivets" aria-hidden="true"></div>
        </section>
      </div>
    </main>

    <!-- Toasts -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3"></div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
  </body>
</html>
